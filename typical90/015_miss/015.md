# 方針

$k = 1,2,3, \dots ,N$それぞれについて解くことを考える。$k$が大きい場合「ボールを何個選ぶか」の選択肢は少なくなる。

一般的にボールを選ぶ個数の最大は$N \div k$程度となるので、「k と選ぶボールの個数 a が与えられたときの、a 個のボールを選んだときの通り数」を$\mathcal{O}(1)$で計算できると仮定すると全体計算量は、
$$N+\frac{N}{2}+\frac{N}{3}+\dots+\frac{N}{N} = N\left(\frac{1}{1}+\frac{1}{2}+\frac{1}{3}+ \dots + \frac{1}{N}\right) = N \times \mathcal{O}(\log N) = \mathcal{O}(N \log N)$$
となるので、$\mathcal{O}(N \log N)$。

では、差が$k$以上となるように a 個のボールを選ぶ方法は何通りあるのだろうか。結論から書くと${}_{N-(k-1)(a-1)\mathrm{C}_a}$となる。この問題は、$N-(k-1)(a-1)$個から$a$個を選ぶ問題に帰着できる。

なぜなら、選んだボールの間には少なくとも$k-1$個のボールがある必要があるので、間に入れるようのボール$(k-1)(a-1)$個を除いた、$N-(k-1)(a-1)$個のボールから$a$個選べばよいからである。
